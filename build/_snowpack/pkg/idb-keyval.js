function o(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function f(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=o(n);return(i,a)=>r.then(d=>a(d.transaction(t,i).objectStore(t)))}let c;function u(){return c||(c=f("keyval-store","keyval")),c}function l(e,t=u()){return t("readonly",n=>o(n.get(e)))}function p(e,t,n=u()){return n("readwrite",r=>(r.put(t,e),o(r.transaction)))}export{l as get,p as set};
